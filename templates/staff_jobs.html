<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="/static/css/bulma_min.css">
  <link rel="stylesheet" type="text/css" href="/static/css/tables.css">
  <title>BRAND Jobs</title>
</head>
<body class="has-navbar-fixed-top">
  {% include 'header.html' %}

  <div class="modal" id="job_modal">
    <div class="modal-background" onclick="closeJobModal();"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">JOB TITLE</p>
      </header>
      <section class="modal-card-body">
        {% include 'new_job.html' %}
      </section>
      <footer class="modal-card-foot">
        <button class="button" onclick="saveChanges();">Save</button>
        <button class="button" onclick="closeJobModal();">Cancel</button>
      </footer>
      </div>
    </div>

  <table class="table is-hoverable is-fullwidth is-bordered is-striped" id="job_table">
  <thead>
    <tr>
      <th>Title</th>
      <th>Location</th>
      <th>Position</th>
      <th>Deadline</th>
      <th>
        Actions
        <a class="button is-rounded is-small add_button" onclick="showJobModal(-1);">Add Job</a>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr id="10">
      <td>Software Engineer</td>
      <td>London</td>
      <td>Full-Time</td>
      <td>23/03/19</td>
      <td>
        <div class="columns has-text-centered is-gapless">
          <div class="column">
            <a class="button is-rounded is-small edit_button" style="margin:2px">Edit</a>
          </div>
          <div class="column">
            <a class="button is-rounded is-small delete_button" style="margin:2px">Delete</a>
          </div>
        </div>
      </td>
    </tr>
    <tr id="12">
      <td>Analyst</td>
      <td>Cambridge</td>
      <td>Part-Time</td>
      <td>21/02/19</td>
      <td>
        <div class="columns has-text-centered is-gapless">
          <div class="column">
            <a class="button is-rounded is-small edit_button" style="margin:2px">Edit</a>
          </div>
          <div class="column">
            <a class="button is-rounded is-small delete_button" style="margin:2px">Delete</a>
          </div>
        </div>
      </td>
    </tr>
  </tbody>
</table>
</body>
<script src="/static/js/jquery-3.3.1.min.js"></script>
<script>
function closeJobModal() {
  $('#job_modal').removeClass('is-active');
}
function showJobModal(job_id) {
  $('#job_modal .modal-card-title').html("JOB:"+job_id);
  $('#job_modal #cur_job_id').html(job_id);
  $('#job_modal').addClass('is-active');
}
function closeCompletedJobModal() {
  $('#saving_job_modal .modal-close').attr('onclick','closeJobLoadingModal();');
  closeJobLoadingModal();
  closeJobModal();
}


$('#job_table').on('click', '.edit_button', function(event) {
  var job_id = $(this).parent().parent().parent().parent().attr('id');
  showJobModal(job_id);
});
$('#job_table').on('click', '.delete_button', function(event) {
    var job_id = $(this).parent().parent().parent().parent().attr('id');
    // DELETE JOB
});
</script>
</html>
